# Oracle-DuckDB Sync 시스템 UI 디자인 설계서 (Gemini Ver.)

## 1. 개요
본 문서는 `oracle-duckdb-sync` 애플리케이션의 사용자 인터페이스(UI)를 관리자와 일반 사용자로 분리하여 운영 효율성과 데이터 접근성을 높이기 위한 디자인 설계서입니다. 본 시스템은 Streamlit 프레임워크를 기반으로 구현되는 것을 가정하여 설계되었습니다.

---

## 2. 정보 구조 (Information Architecture)

시스템은 크게 **로그인(진입)**, **관리자 영역**, **사용자 영역**으로 구분됩니다.

```mermaid
graph TD
    A[애플리케이션 시작] --> B{로그인 / 역할 선택}
    B -->|관리자 인증| C[관리자 대시보드]
    B -->|사용자 인증| D[사용자 대시보드]

    subgraph 관리자 메뉴
    C --> C1[사용자 관리]
    C --> C2[데이터 동기화 제어]
    C --> C3[시스템 현황 모니터링]
    end

    subgraph 사용자 메뉴
    D --> D1[차트 조회 및 분석]
    D1 --> D2[데이터 필터링]
    end
```

---

## 3. 화면별 상세 설계

### 3.1. 진입 화면 (로그인)
애플리케이션 접속 시 가장 먼저 표시되는 화면입니다.

- **레이아웃**: 중앙 정렬 카드 형태
- **구성 요소**:
  - 시스템 로고 및 타이틀
  - 사용자 ID 입력 필드
  - 비밀번호 입력 필드
  - **로그인 버튼**: 인증 성공 시 해당 사용자의 역할(Admin/User)에 따라 해당 세션으로 리다이렉트

### 3.2. 관리자 모드 (Admin Mode)
시스템의 전반적인 설정을 관리하고 상태를 모니터링합니다. 사이드바를 통해 네비게이션합니다.

#### A. 사용자 관리 (User Management)
- **목적**: 시스템에 접근 가능한 사용자를 등록하고 역할을 할당합니다.
- **UI 구성**:
  - **상단**: '사용자 추가' 버튼 및 **사용자 현황 요약(총 가입자, 활성 사용자 수)**.
  - **메인**: 사용자 목록 데이터 그리드.
    - 컬럼: ID, 이름, 역할(Admin/User), 등록일, 최근 접속일, **상태(Active/Suspended)**.
    - 액션: 수정(Edit), 삭제(Delete), 비밀번호 초기화, **활동 로그(Audit Trail) 보기**.

#### B. 데이터 동기화 (Data Synchronization)
- **목적**: Oracle에서 DuckDB로의 데이터 이동을 제어하고 설정을 변경합니다.
- **UI 구성**:
  - **상태 패널**: 현재 동기화 상태 (대기 중, 동기화 중, 에러) 표시.
  - **제어 패널**:
    - `수동 동기화 시작` 및 `중지` 버튼.
  - **설정 영역 (Expander)**:
    - 소스/타겟 연결 정보 확인.
    - 스케줄링 설정 (매일, 매시간 등 인터벌 선택).
  - **최근 동기화 이력**: 실행 성공/실패 기록 테이블.
    - **추가 지표**: **처리된 행 수(Rows processed), 소요 시간(Duration)**.

#### C. 시스템 현황 (System Status)
- **목적**: 서버 리소스 및 애플리케이션 로그를 확인합니다.
- **UI 구성**:
  - **KPI 지표 (Metrics)**:
    - CPU/메모리 사용률, DuckDB 파일 용량.
  - **로그 뷰어**:
    - 로그 레벨 필터(INFO/WARN/ERROR)가 포함된 실시간 로그 창.

---

### 3.3. 사용자 모드 (User Mode)
데이터를 시각화하고 분석하는 데 초점을 맞춥니다.

#### A. 데이터 필터링 (Data Filtering - Sidebar)
- **위치**: 좌측 사이드바 고정.
- **구성 요소**:
  - **기간 선택**: 날짜 범위 선택 (Date Range Picker) + **빠른 선택(최근 1시간, 1일 등)**.
  - **데이터 소스 선택**: 테이블/뷰 선택 드롭다운.
  - **태그/카테고리 필터**: 다중 선택(Multi-select) 박스.
  - **샘플링 설정**: 차트 해상도(LTTB 알고리즘 적용 수준) 조절 슬라이더.
  - **(Optional) 필터 프리셋 저장**: 자주 사용하는 필터 조건 저장 기능.

#### B. 차트 조회 (Chart Visualization - Main Area)
- **위치**: 메인 콘텐츠 영역.
- **구성 요소**:
  - **메인 시계열 차트**: 인터랙티브 라인 차트 (Zoom/Pan 지원).
  - **상태 표시**: 데이터 로딩 중 **스켈레톤(Skeleton) UI** 또는 스피너 표시.
  - **통계 요약 카드**: 최소/최대/평균 및 전일 대비 증감 표시.
  - **데이터 그리드**: 차트 하단에 원본 데이터 테이블 및 CSV 다운로드 버튼 제공.

---

## 4. UI/UX 디자인 가이드라인

- **일관성**: 관리자 화면은 정보 전달 위주, 사용자 화면은 가독성 위주의 레이아웃 구성.
- **피드백**: 동기화 등 긴 작업 시 Spinner와 Progress Bar 노출.
- **색상**: 신뢰감을 주는 네이비(Primary)와 상태를 나타내는 신호등 색상(Green/Yellow/Red) 활용.

---

## 5. 디자인 개선 및 보강 (Based on Review)
외부 디자인 제안(Codex Ver.)과 비교 분석 후 본 설계에 반영된 개선 사항입니다.

### 5.1. 관리자 기능 강화 (Operational Detail)
- **감사 로그(Audit Trail)**: 사용자 관리 화면에서 단순 정보 수정 외에, 누가 언제 로그인했고 어떤 설정을 변경했는지 추적하는 기능을 추가하여 보안성을 높입니다.
- **상세 동기화 지표**: 동기화 이력에 단순히 성공/실패만 표시하지 않고, `처리 건수(Rows Processed)`와 `소요 시간(Duration)`을 명시하여 성능 모니터링이 가능하도록 합니다.

### 5.2. 사용자 경험(UX) 고도화
- **필터 프리셋(Filter Presets)**: 사용자가 복잡한 필터 조합(기간+태그+소스)을 매번 다시 설정하지 않도록 '조건 저장' 기능을 고려합니다. (Streamlit Session State 활용).
- **상태별 UI(UI States)**: 데이터가 없을 때(`Empty State`)와 로딩 중일 때(`Loading State`)를 명확히 정의하여 사용자가 시스템이 멈춘 것으로 오해하지 않도록 합니다.
- **빠른 기간 선택(Quick Picks)**: 날짜 지정 외에 '최근 1시간', '오늘', '어제' 등 원클릭 기간 설정 버튼을 추가합니다.

### 5.3. 기술적 타당성 (Streamlit Fit)
- 복잡한 3단 레이아웃 대신 Streamlit의 강점인 **Sidebar + Main 2단 구조**를 유지하되, **Expander**와 **Tabs**를 적극 활용하여 정보의 깊이를 조절합니다.
- 대용량 데이터 처리를 위한 **LTTB(Downsampling) 옵션**은 UI 퍼포먼스를 위해 필수적으로 유지합니다.